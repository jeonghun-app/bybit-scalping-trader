# 전략 업데이트 - 롱/숏 양방향 전략

## 🎯 주요 변경사항

### 이전 전략
- **롱 포지션만** 지원
- RSI < 35, 볼린저 밴드 하단 → 롱 진입
- 승률 31-37% (매우 낮음)

### 새로운 전략
- **롱/숏 양방향** 지원
- 피보나치 지지/저항선 활용
- 추세 필터 추가
- 반등/하락 확인 추가

---

## 📊 롱 전략 (개선)

### 진입 조건
```python
1. 볼린저 밴드 하단 근처 (1.5% 이내)
2. RSI < 35 AND RSI 상승 중 (반등 확인!)
3. 상승 추세 (MA5 > MA20)
4. 피보나치 지지선 근처 (1개 이상 타임프레임)
5. 강한 반등 신호 OR 해머 패턴
```

### 개선 포인트
- ✅ **RSI 반등 확인**: 단순 과매도가 아닌 반등 시작 확인
- ✅ **추세 필터**: 상승 추세에서만 롱 진입
- ✅ **캔들 패턴**: 해머 패턴 확인
- ✅ **강한 반등**: 양봉 + 0.2% 이상 상승

---

## 📊 숏 전략 (신규)

### 진입 조건
```python
1. 볼린저 밴드 상단 근처 (1.5% 이내)
2. RSI > 65 AND RSI 하락 중 (하락 확인!)
3. 하락 추세 (MA5 < MA20)
4. 피보나치 저항선 근처 (1개 이상 타임프레임)
5. 강한 하락 신호 OR 슈팅스타 패턴
```

### 특징
- 🔄 **롱의 반대**: 모든 조건이 롱의 반대
- 📉 **하락 추세 포착**: 과매수 구간에서 하락 시작
- 🎯 **저항선 활용**: 피보나치 저항선에서 반락

---

## 🎯 기대 효과

### 1. 승률 개선
- **이전**: 31-37% (롱만)
- **예상**: 45-55% (롱/숏 균형)

### 2. 기회 증가
- **이전**: 하락장에서 기회 없음
- **예상**: 상승장/하락장 모두 거래 가능

### 3. 리스크 분산
- **이전**: 롱만 → 하락장에서 큰 손실
- **예상**: 롱/숏 → 시장 방향 무관

---

## 📋 백테스팅 계획

### 테스트 1: 롱/숏 통합 전략
```bash
python main_backtest.py
```
- 롱/숏 모두 활성화
- 1분봉 + 3분봉 테스트
- 승률, ROI 확인

### 테스트 2: 롱 전략만
```python
# entry_strategy.py에서 숏 비활성화
# short_signal = None
```

### 테스트 3: 숏 전략만
```python
# entry_strategy.py에서 롱 비활성화
# long_signal = None
```

---

## 🔍 예상 시나리오

### 시나리오 1: 하락장
- **이전**: 롱만 → 계속 손실 (-90%)
- **예상**: 숏 활용 → 수익 가능 (+20~30%)

### 시나리오 2: 횡보장
- **이전**: 롱만 → 손실 누적
- **예상**: 롱/숏 번갈아 → 작은 수익 누적

### 시나리오 3: 상승장
- **이전**: 롱 → 수익 (하지만 너무 일찍 진입)
- **예상**: 롱 (반등 확인) → 더 높은 승률

---

## 💡 다음 단계

1. ✅ **백테스팅 실행**
   - 롱/숏 통합 전략 테스트
   - 결과 분석

2. ⏳ **전략 최적화**
   - RSI 임계값 조정 (35/65 vs 30/70)
   - 피보나치 허용 오차 조정
   - 추세 필터 강도 조정

3. ⏳ **실전 테스트**
   - 테스트넷에서 실시간 테스트
   - 소액으로 실전 테스트

