# 고급 전략 가이드 - 다중 요소 종합 판단

## 🎯 전략 철학

**"단일 지표가 아닌 여러 요소를 종합적으로 판단"**

1. **피보나치 거리** - 얼마나 더 갈 수 있는가?
2. **비트코인 추세** - 시장 전체 방향은?
3. **개별 코인 추세** - 이 코인의 방향은?
4. **펀딩비** - 시장 심리는?
5. **RSI + 볼린저** - 과매수/과매도는?

---

## 📊 전략 1: 하락 추세 중 숏 진입

### 시나리오
```
상황: 코인이 하락 중
질문: 지금 숏 진입해도 될까?
판단: 피보나치 하단까지 거리가 있으면 더 떨어질 수 있다!
```

### 진입 조건 (신뢰도 70점 이상)

| 조건 | 배점 | 설명 |
|------|------|------|
| 코인 하락 추세 | 30점 | 30분 추세 하락 |
| 피보나치 하단 거리 | 25점 | 1% 이상 여유 |
| BTC 하락/횡보 | 10-20점 | 하락이면 20점, 횡보면 10점 |
| 펀딩비 양수 | 15점 | 롱 과열 (선택) |
| RSI 여유 | 10점 | RSI > 50 |

### 예시
```python
# 진입 성공 예시
코인: FOLKSUSDT
상황:
  - 코인 30분 추세: -2.5% (하락) → 30점
  - 피보나치 0.382 지지선까지: 2.3% → 25점
  - BTC 1시간 추세: -0.8% (하락) → 20점
  - 펀딩비: +0.015% (롱 과열) → 15점
  - RSI: 55 → 10점
  
총점: 100점 ✅
판단: 숏 진입!
이유: "코인 하락 추세 (-2.5%) | 하단까지 2.3% 여유 | BTC도 하락 (-0.8%) | 롱 과열 (펀딩비 +0.015%) | RSI 여유 (55)"
```

### 진입 거부 예시
```python
# 진입 거부 예시
코인: FOLKSUSDT
상황:
  - 코인 30분 추세: -1.5% (하락) → 30점
  - 피보나치 0.382 지지선까지: 0.5% → ❌ (너무 가까움)
  
판단: 진입 금지!
이유: "피보나치 하단에 근접 (반등 가능성)"
```

---

## 📊 전략 2: 상승 추세 중 롱 진입

### 시나리오
```
상황: 코인이 상승 중
질문: 지금 롱 진입해도 될까?
판단: 피보나치 상단까지 거리가 있으면 더 오를 수 있다!
```

### 진입 조건 (신뢰도 70점 이상)

| 조건 | 배점 | 설명 |
|------|------|------|
| 코인 상승 추세 | 30점 | 30분 추세 상승 |
| 피보나치 상단 거리 | 25점 | 1% 이상 여유 |
| BTC 상승/횡보 | 10-20점 | 상승이면 20점, 횡보면 10점 |
| 펀딩비 음수 | 15점 | 숏 과열 (선택) |
| RSI 여유 | 10점 | RSI < 50 |

### 예시
```python
# 진입 성공 예시
코인: RAVEUSDT
상황:
  - 코인 30분 추세: +2.8% (상승) → 30점
  - 피보나치 0.618 저항선까지: 3.1% → 25점
  - BTC 1시간 추세: +1.2% (상승) → 20점
  - 펀딩비: -0.008% (숏 과열) → 15점
  - RSI: 45 → 10점
  
총점: 100점 ✅
판단: 롱 진입!
이유: "코인 상승 추세 (+2.8%) | 상단까지 3.1% 여유 | BTC도 상승 (+1.2%) | 숏 과열 (펀딩비 -0.008%) | RSI 여유 (45)"
```

---

## 📊 전략 3: 지지선 반등 노리기

### 시나리오
```
상황: 코인이 하락 후 피보나치 지지선 도달
질문: 여기서 반등할까?
판단: RSI 과매도 + 볼린저 하단 + 지지선 → 반등 가능성 높다!
```

### 진입 조건 (신뢰도 75점 이상)

| 조건 | 배점 | 설명 |
|------|------|------|
| 피보나치 지지선 근처 | 30점 | 1% 이내 |
| RSI 과매도 | 25점 | RSI < 35 |
| 볼린저 하단 | 20점 | 하단 20% 이내 |
| BTC 안정/상승 | 5-15점 | 상승이면 15점, 안정이면 5점 |
| 펀딩비 음수 | 10점 | 숏 과열 (선택) |

### 예시
```python
# 진입 성공 예시
코인: SAROSUSDT
상황:
  - 피보나치 0.382 지지선: 0.5% 거리 → 30점
  - RSI: 28 (과매도) → 25점
  - 볼린저 밴드: 하단 15% → 20점
  - BTC 1시간 추세: +0.5% (안정) → 5점
  - 펀딩비: -0.012% (숏 과열) → 10점
  
총점: 90점 ✅
판단: 롱 진입!
이유: "0.382 지지선 근처 (0.50%) | RSI 과매도 (28) | 볼린저 하단 (15%) | BTC 안정 (+0.5%) | 숏 과열 (펀딩비 -0.012%)"
```

---

## 🎯 전략 우선순위

### 1순위: 고급 전략 (신뢰도 70-100점)
- 하락 추세 중 숏 (70점 이상)
- 상승 추세 중 롱 (70점 이상)
- 지지선 반등 (75점 이상)

### 2순위: 기본 전략 (신뢰도 60점)
- 기존 RSI + 볼린저 + 피보나치 전략
- 추세 필터만 적용

### 진입 순서
```python
1. 고급 전략 체크 (신뢰도 70점 이상)
   ↓ 없으면
2. 기본 전략 체크 (신뢰도 60점)
   ↓ 없으면
3. 진입 안함
```

---

## 📊 펀딩비 활용

### 펀딩비란?
- 선물 가격과 현물 가격 차이를 조정하는 수수료
- 8시간마다 정산
- 양수: 롱이 숏에게 지불 (롱 과열)
- 음수: 숏이 롱에게 지불 (숏 과열)

### 활용 방법
```python
# 롱 과열 (펀딩비 > 0.01%)
→ 숏 진입 유리 (롱 청산 압력)

# 숏 과열 (펀딩비 < -0.01%)
→ 롱 진입 유리 (숏 청산 압력)

# 중립 (펀딩비 ≈ 0%)
→ 영향 없음
```

---

## 🎯 기대 효과

### 현재 (기본 전략)
- 승률: 38.82%
- ROI: -25.40%
- 문제: 추세 무시, 단일 지표 의존

### 예상 (고급 전략)
- 승률: 55-65%
- ROI: +20-35%
- 개선: 다중 요소 종합 판단

### 개선 포인트
1. **피보나치 거리 고려** → 더 갈 수 있는지 판단
2. **비트코인 추세 고려** → 시장 방향 확인
3. **펀딩비 고려** → 시장 심리 활용
4. **신뢰도 점수** → 확신 있는 거래만

---

## 🔧 파라미터 조정

### 신뢰도 임계값
```python
# 하락 추세 숏
confidence_threshold = 70  # 60-80

# 상승 추세 롱
confidence_threshold = 70  # 60-80

# 지지선 반등
confidence_threshold = 75  # 65-85
```

### 피보나치 거리
```python
# 여유 공간 판단
min_distance_pct = 1.0  # 0.5-2.0%

# 근접 판단
max_distance_pct = 1.0  # 0.5-1.5%
```

### 펀딩비 임계값
```python
# 롱 과열
long_heavy_threshold = 0.0001  # 0.01%

# 숏 과열
short_heavy_threshold = -0.0001  # -0.01%
```

---

## 🚀 다음 단계

1. ✅ **백테스팅 실행**
   ```bash
   python main_backtest.py
   ```

2. ⏳ **결과 분석**
   - 고급 전략 vs 기본 전략 비교
   - 신뢰도별 승률 분석
   - 전략별 수익 분석

3. ⏳ **최적화**
   - 신뢰도 임계값 조정
   - 배점 조정
   - 파라미터 튜닝

4. ⏳ **실전 테스트**
   - 테스트넷 실시간 테스트
   - 소액 실전 테스트
